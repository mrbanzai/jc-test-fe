// usage: log('inside coolFunc', this, arguments);
window.log = function(){
  log.history = log.history || []; // store logs to an array for reference
  log.history.push(arguments);
  arguments.callee = arguments.callee.caller;
  if(this.console) console.log( Array.prototype.slice.call(arguments) );
};
// make it safe to use console.log always
(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();)b[a]=b[a]||c})(window.console=window.console||{});

/**
 * geo meta shim for the w3c geolocation api
 * @url http://ajaxian.com/archives/navigatorgeolocation-using-the-w3c-geolocation-api-today
 */
 /*
(typeof navigator.geolocation=="undefined"||navigator.geolocation.shim)&&function(){(function(){if(!window.google||!google.gears){var a=null;if(typeof GearsFactory!="undefined")a=new GearsFactory;else try{a=new ActiveXObject("Gears.Factory"),a.getBuildInfo().indexOf("ie_mobile")!=-1&&a.privateSetGlobalObject(this)}catch(f){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"])a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type=
"application/x-googlegears",document.documentElement.appendChild(a)}if(a&&(window.google||(google={}),!google.gears))google.gears={factory:a}}})();var g=function(){var a=google.gears.factory.create("beta.geolocation"),f=function(a,c){return function(d){a(d);c.lastPosition=d}};return{shim:!0,type:"Gears",lastPosition:null,getCurrentPosition:function(b,c,d){b=f(b,this);a.getCurrentPosition(b,c,d)},watchPosition:function(b,c,d){a.watchPosition(b,c,d)},clearWatch:function(b){a.clearWatch(b)},getPermission:function(b,
c,d){a.getPermission(b,c,d)}}}(),h=function(){var a=!1,f=function(){if(!c()&&!a){a=!0;var b=document.createElement("script");b.src="http://www.google.com/jsapi?callback=_google_loader_apiLoaded";b.type="text/javascript";document.getElementsByTagName("body")[0].appendChild(b)}},b=[];window._google_loader_apiLoaded=function(){if(c())for(;b.length>0;)b.pop()()};var c=function(){return window.google&&google.loader},d=function(a){if(c())return!0;b.push(a);f();return!1};f();return{shim:!0,type:"ClientLocation",
lastPosition:null,getCurrentPosition:function(a,b,c){var f=this;if(d(function(){f.getCurrentPosition(a,b,c)}))if(google.loader.ClientLocation){var e=google.loader.ClientLocation;e={latitude:e.latitude,longitude:e.longitude,altitude:null,accuracy:43E3,altitudeAccuracy:null,heading:null,velocity:null,timestamp:new Date,address:{city:e.address.city,country:e.address.country,country_code:e.address.country_code,region:e.address.region}};a(e);this.lastPosition=e}else b==="function"&&b({code:3,message:"Using the Google ClientLocation API and it is not able to calculate a location."})},
watchPosition:function(a,b,c){this.getCurrentPosition(a,b,c);var d=this;return setInterval(function(){d.getCurrentPosition(a,b,c)},1E4)},clearWatch:function(a){clearInterval(a)},getPermission:function(){return!0}}}();navigator.geolocation=window.google&&google.gears?g:h}();
*/

/**
 * JSON parsing
 */
if(!this.JSON)this.JSON={};
(function(){function k(a){return a<10?"0"+a:a}function o(a){p.lastIndex=0;return p.test(a)?'"'+a.replace(p,function(a){var c=r[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function l(a,i){var c,d,h,m,g=e,f,b=i[a];b&&typeof b==="object"&&typeof b.toJSON==="function"&&(b=b.toJSON(a));typeof j==="function"&&(b=j.call(i,a,b));switch(typeof b){case "string":return o(b);case "number":return isFinite(b)?String(b):"null";case "boolean":case "null":return String(b);
case "object":if(!b)return"null";e+=n;f=[];if(Object.prototype.toString.apply(b)==="[object Array]"){m=b.length;for(c=0;c<m;c+=1)f[c]=l(c,b)||"null";h=f.length===0?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+g+"]":"["+f.join(",")+"]";e=g;return h}if(j&&typeof j==="object"){m=j.length;for(c=0;c<m;c+=1)d=j[c],typeof d==="string"&&(h=l(d,b))&&f.push(o(d)+(e?": ":":")+h)}else for(d in b)Object.hasOwnProperty.call(b,d)&&(h=l(d,b))&&f.push(o(d)+(e?": ":":")+h);h=f.length===0?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+
g+"}":"{"+f.join(",")+"}";e=g;return h}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,r={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,i,c){var d;n=e="";if(typeof c==="number")for(d=0;d<c;d+=1)n+=" ";else typeof c==="string"&&(n=c);if((j=i)&&typeof i!=="function"&&(typeof i!=="object"||typeof i.length!=="number"))throw Error("JSON.stringify");return l("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,e){function c(a,d){var g,f,b=a[d];if(b&&typeof b==="object")for(g in b)Object.hasOwnProperty.call(b,g)&&(f=c(b,g),f!==void 0?b[g]=f:delete b[g]);return e.call(a,d,b)}var d;a=String(a);q.lastIndex=0;q.test(a)&&(a=a.replace(q,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof e==="function"?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})();

/**
 * jquery spinner plugin
 * @url http://www.jqueryin.com/projects/spinner-jquery-preloader-plugin
 */
(function(e){e.fn.spinner=function(h){var a=e.extend({},e.fn.spinner.defaults,h);return this.each(function(){var b=0,f=0,g=b=0;f=0;var c=e(this);if(h=="remove"||h=="close"){b=c.data("spinner");var d=c.data("opts");if(typeof b!="undefined"){b.remove();c.removeData("spinner").removeData("opts");d.hide&&c.css("visibility","visible");d.onFinish.call(this);return}}d=c.offset();b=c.outerWidth();g=c.outerHeight();g>a.height?f=Math.round((g-a.height)/2):g<a.height&&(f=0-Math.round((a.height-g)/2));f=d.top+ f+"px";b=a.position=="right"?d.left+b+10+"px":a.position=="left"?d.left-a.width-10+"px":d.left+Math.round(0.5*b)-Math.round(0.5*a.width)+"px";a.onStart.call(this);a.hide&&c.css("visibility","hidden");b=e('<img src="'+a.img+'" style="position: absolute; left: '+b+"; top: "+f+"; width: "+a.width+"px; height: "+a.height+"px; z-index: "+a.zIndex+';" />').appendTo("body");c.data("spinner",b).data("opts",a)})};e.fn.spinner.defaults={position:"right",img:"spinner.gif",height:16,width:16,zIndex:10001,hide:!1, onStart:function(){},onFinish:function(){}}})(jQuery);

/**
 * jquery placeholder plugin
 */
new function(a){a.fn.placeholder=function(b){b=b||{};var c=b.dataKey||"placeholderValue",h=b.attr||"placeholder",d=b.className||"placeholder",i=b.values||[],j=b.blockSubmit||!1,k=b.blankSubmit||!1,f=b.onSubmit||!1,g=b.value||"",l=b.cursor_position||0;return this.filter(":input").each(function(b){a.data(this,c,i[b]||a(this).attr(h))}).each(function(){a.trim(a(this).val())===""&&a(this).addClass(d).val(a.data(this,c))}).focus(function(){a.trim(a(this).val())===a.data(this,c)&&a(this).removeClass(d).val(g);
a.fn.setCursorPosition&&a(this).setCursorPosition(l)}).blur(function(){a.trim(a(this).val())===g&&a(this).addClass(d).val(a.data(this,c))}).each(function(b,e){j?new function(b){a(b.form).submit(function(){return a.trim(a(b).val())!=a.data(b,c)})}(e):k?new function(b){a(b.form).submit(function(){a.trim(a(b).val())==a.data(b,c)&&a(b).removeClass(d).val("");return!0})}(e):f&&new function(b){a(b.form).submit(f)}(e)})}}(jQuery);

 /*!
 * jQuery Form Plugin
 * version: 2.43 (12-MAR-2010)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(b){function m(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}b.fn.ajaxSubmit=function(a){function d(){function c(){var a=i.attr("target"),j=i.attr("action");d.setAttribute("target",g);d.getAttribute("method")!="POST"&&d.setAttribute("method","POST");d.getAttribute("action")!=e.url&&d.setAttribute("action",e.url);e.skipEncodingOverride||
i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&setTimeout(function(){q=!0;f()},e.timeout);var l=[];try{if(e.extraData)for(var m in e.extraData)l.push(b('<input type="hidden" name="'+m+'" value="'+e.extraData[m]+'" />').appendTo(d)[0]);h.appendTo("body");k.attachEvent?k.attachEvent("onload",f):k.addEventListener("load",f,!1);d.submit()}finally{d.setAttribute("action",j),a?d.setAttribute("target",a):i.removeAttr("target"),b(l).remove()}}function f(){if(!j.aborted){var a=
k.contentWindow?k.contentWindow.document:k.contentDocument?k.contentDocument:k.document;if(a&&a.location.href!=e.iframeSrc){k.detachEvent?k.detachEvent("onload",f):k.removeEventListener("load",f,!1);var c=!0;try{if(q)throw"timeout";var d=e.dataType=="xml"||a.XMLDocument||b.isXMLDoc(a);m("isXml="+d);if(!d&&window.opera&&(a.body==null||a.body.innerHTML=="")&&--s){m("requeing onLoad callback, DOM not available");setTimeout(f,250);return}j.responseText=a.body?a.body.innerHTML:a.documentElement?a.documentElement.innerHTML:
null;j.responseXML=a.XMLDocument?a.XMLDocument:a;j.getResponseHeader=function(a){return{"content-type":e.dataType}[a]};var g=/(json|script)/.test(e.dataType);if(g||e.textarea){var i=a.getElementsByTagName("textarea")[0];if(i)j.responseText=i.value;else if(g){var n=a.getElementsByTagName("pre")[0],o=a.getElementsByTagName("body")[0];if(n)j.responseText=n.textContent;else if(o)j.responseText=o.innerHTML}}else if(e.dataType=="xml"&&!j.responseXML&&j.responseText!=null)j.responseXML=t(j.responseText);
r=u(j,e.dataType,e)}catch(p){m("error caught:",p),c=!1,j.error=p,e.error&&e.error.call(e.context,j,"error",p),l&&b.event.trigger("ajaxError",[j,e,p])}j.aborted&&(m("upload aborted"),c=!1);c&&(e.success&&e.success.call(e.context,r,"success",j),l&&b.event.trigger("ajaxSuccess",[j,e]));l&&b.event.trigger("ajaxComplete",[j,e]);l&&!--b.active&&b.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,j,c?"success":"error");setTimeout(function(){h.removeData("form-plugin-onload");h.remove();j.responseXML=
null},100)}}}var d=i[0];if(b(":input[name=submit],:input[id=submit]",d).length)alert('Error: Form elements must not have name or id of "submit".');else{var e=b.extend(!0,{},b.ajaxSettings,a);e.context=e.context||e;var g="jqFormIO"+(new Date).getTime(),h=b('<iframe id="'+g+'" name="'+g+'" src="'+e.iframeSrc+'" />'),k=h[0];h.css({position:"absolute",top:"-1000px",left:"-1000px"});var j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},
setRequestHeader:function(){},abort:function(){m("aborting upload...");this.aborted=1;h.attr("src",e.iframeSrc);j.error="aborted";e.error&&e.error.call(e.context,j,"error","aborted");l&&b.event.trigger("ajaxError",[j,e,"aborted"]);e.complete&&e.complete.call(e.context,j,"error")}},l=e.global;l&&!b.active++&&b.event.trigger("ajaxStart");l&&b.event.trigger("ajaxSend",[j,e]);if(e.beforeSend&&e.beforeSend.call(e.context,j,e)===!1)e.global&&b.active--;else if(!j.aborted){var q=0,n=d.clk;if(n){var o=n.name;
if(o&&!n.disabled&&(e.extraData=e.extraData||{},e.extraData[o]=n.value,n.type=="image"))e.extraData[o+".x"]=d.clk_x,e.extraData[o+".y"]=d.clk_y}e.forceSync?c():setTimeout(c,10);var r,s=50,t=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},v=b.parseJSON||function(a){return window.eval("("+a+")")},u=function(a,
c,d){var e=a.getResponseHeader("content-type")||"",f=c==="xml"||!c&&e.indexOf("xml")>=0;a=f?a.responseXML:a.responseText;f&&a.documentElement.nodeName==="parsererror"&&b.error&&b.error("parsererror");d&&d.dataFilter&&(a=d.dataFilter(a,c));typeof a==="string"&&(c==="json"||!c&&e.indexOf("json")>=0?a=v(a):(c==="script"||!c&&e.indexOf("javascript")>=0)&&b.globalEval(a));return a}}}}if(!this.length)return m("ajaxSubmit: skipping submit process - no element selected"),this;typeof a=="function"&&(a={success:a});
var f=this.attr("action");(f=typeof f==="string"?b.trim(f):"")&&(f=(f.match(/^([^#]+)/)||[])[1]);f=f||window.location.href||"";a=b.extend(!0,{url:f,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);f={};this.trigger("form-pre-serialize",[this,a,f]);if(f.veto)return m("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&a.beforeSerialize(this,a)===!1)return m("ajaxSubmit: submit aborted via beforeSerialize callback"),
this;var c,h,g=this.formToArray(a.semantic);if(a.data)for(c in a.extraData=a.data,a.data)if(a.data[c]instanceof Array)for(var k in a.data[c])g.push({name:c,value:a.data[c][k]});else h=a.data[c],h=b.isFunction(h)?h():h,g.push({name:c,value:h});if(a.beforeSubmit&&a.beforeSubmit(g,this,a)===!1)return m("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[g,this,a,f]);if(f.veto)return m("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;c=b.param(g);
a.type.toUpperCase()=="GET"?(a.url+=(a.url.indexOf("?")>=0?"&":"?")+c,a.data=null):a.data=c;var i=this,l=[];a.resetForm&&l.push(function(){i.resetForm()});a.clearForm&&l.push(function(){i.clearForm()});if(!a.dataType&&a.target){var q=a.success||function(){};l.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(q,arguments)})}else a.success&&l.push(a.success);a.success=function(b,c,d){for(var e=a.context||a,f=0,g=l.length;f<g;f++)l[f].apply(e,[b,c,d||i,i])};c=b("input:file",
this).length>0;k=i.attr("enctype")=="multipart/form-data"||i.attr("encoding")=="multipart/form-data";a.iframe!==!1&&(c||a.iframe||k)?a.closeKeepAlive?b.get(a.closeKeepAlive,d):d():b.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s)return m("DOM not ready, queuing ajaxForm"),b(function(){b(d.s,d.c).ajaxForm(a)}),this;m("terminating; zero elements found by selector"+(b.isReady?"":
" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.isDefaultPrevented()||(d.preventDefault(),b(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var c=a.target,d=b(c);if(!d.is(":submit,input:image")){c=d.closest(":submit");if(c.length==0)return;c=c[0]}var g=this;g.clk=c;if(c.type=="image")a.offsetX!=void 0?(g.clk_x=a.offsetX,g.clk_y=a.offsetY):typeof b.fn.offset=="function"?(d=d.offset(),g.clk_x=a.pageX-d.left,g.clk_y=a.pageY-d.top):(g.clk_x=
a.pageX-c.offsetLeft,g.clk_y=a.pageY-c.offsetTop);setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a){var d=[];if(this.length===0)return d;var f=this[0],c=a?f.getElementsByTagName("*"):f.elements;if(!c)return d;var h,g,k,i,l,m;h=0;for(l=c.length;h<l;h++)if(g=c[h],k=g.name)if(a&&f.clk&&g.type=="image")!g.disabled&&f.clk==g&&(d.push({name:k,value:b(g).val()}),d.push({name:k+
".x",value:f.clk_x},{name:k+".y",value:f.clk_y}));else if((i=b.fieldValue(g,!0))&&i.constructor==Array){g=0;for(m=i.length;g<m;g++)d.push({name:k,value:i[g]})}else i!==null&&typeof i!="undefined"&&d.push({name:k,value:i});if(!a&&f.clk&&(a=b(f.clk),c=a[0],(k=c.name)&&!c.disabled&&c.type=="image"))d.push({name:k,value:a.val()}),d.push({name:k+".x",value:f.clk_x},{name:k+".y",value:f.clk_y});return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var d=
[];this.each(function(){var f=this.name;if(f){var c=b.fieldValue(this,a);if(c&&c.constructor==Array)for(var h=0,g=c.length;h<g;h++)d.push({name:f,value:c[h]});else c!==null&&typeof c!="undefined"&&d.push({name:this.name,value:c})}});return b.param(d)};b.fn.fieldValue=function(a){for(var d=[],f=0,c=this.length;f<c;f++){var h=b.fieldValue(this[f],a);h===null||typeof h=="undefined"||h.constructor==Array&&!h.length||(h.constructor==Array?b.merge(d,h):d.push(h))}return d};b.fieldValue=function(a,d){var f=
a.name,c=a.type,h=a.tagName.toLowerCase();d===void 0&&(d=!0);if(d&&(!f||a.disabled||c=="reset"||c=="button"||(c=="checkbox"||c=="radio")&&!a.checked||(c=="submit"||c=="image")&&a.form&&a.form.clk!=a||h=="select"&&a.selectedIndex==-1))return null;if(h=="select"){var g=a.selectedIndex;if(g<0)return null;f=[];h=a.options;var k=(c=c=="select-one")?g+1:h.length;for(g=c?g:0;g<k;g++){var i=h[g];if(i.selected){var l=i.value;l||(l=i.attributes&&i.attributes.value&&!i.attributes.value.specified?i.text:i.value);
if(c)return l;f.push(l)}}return f}return b(a).val()};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();if(a=="text"||a=="password"||b=="textarea")this.value="";else if(a=="checkbox"||a=="radio")this.checked=!1;else if(b=="select")this.selectedIndex=-1})};b.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||
typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){a===void 0&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){a===void 0&&(a=!0);return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio")this.checked=a;else if(this.tagName.toLowerCase()=="option")d=b(this).parent("select"),a&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(!1),this.selected=a})}})(jQuery);

/**
 * jQuery Templating Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(d){function n(a,b,e,c){c={data:c||(b?b.data:{}),_wrap:b?b._wrap:null,tmpl:null,parent:b||null,nodes:[],calls:A,nest:B,wrap:C,html:D,update:E};a&&d.extend(c,a,{nodes:[],parent:b});if(e)c.tmpl=e,c._ctnt=c._ctnt||c.tmpl(d,c),c.key=++o,(r.length?p:j)[o]=c;return c}function k(a,b,e){var c,e=e?d.map(e,function(b){return typeof b==="string"?a.key?b.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+m+'="'+a.key+'" $2'):b:k(b,a,b._ctnt)}):a;if(b)return e;e=e.join("");e.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(a,b,e,i){c=d(e).get();u(c);b&&(c=s(b).concat(c));i&&(c=c.concat(s(i)))});return c?c:s(e)}function s(a){var b=document.createElement("div");b.innerHTML=a;return d.makeArray(b.childNodes)}function v(a){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+d.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(b,a,c,g,h,f,i){b=d.tmpl.tag[c];if(!b)throw"Template command not found: "+c;c=b._default||[];f&&!/\w$/.test(h)&&(h+=f,f="");h?(h=t(h),i=i?","+t(i)+")":f?")":"",i=f?h.indexOf(".")>-1?h+f:"("+h+").call($item"+i:h,f=f?i:"(typeof("+h+")==='function'?("+h+").call($item):("+h+"))"):f=i=c.$1||"null";g=t(g);return"');"+b[a?"close":"open"].split("$notnull_1").join(h?"typeof("+h+")!=='undefined' && ("+h+")!=null":"true").split("$1a").join(f).split("$1").join(i).split("$2").join(g?g.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,
function(a,b,c,d){return(d=d?","+d+")":c?")":"")?"("+b+").call($item"+d:a}):c.$2||"")+"_.push('"})+"');}return _;")}function w(a,b){a._wrap=k(a,!0,d.isArray(b)?b:[x.test(b)?b:d(b).html()]).join("")}function t(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function u(a){function b(a){function b(a){var F;a+=e;F=h[a]=h[a]||n(f,j[f.parent.key+e]||f.parent,null,!0),f=F}var c,g=a,f,i;if(i=a.getAttribute(m)){for(;g.parentNode&&(g=g.parentNode).nodeType===1&&!(c=g.getAttribute(m)););if(c!==
i){g=g.parentNode?g.nodeType===11?0:g.getAttribute(m)||0:0;if(!(f=j[i]))f=p[i],f=n(f,j[g]||p[g],null,!0),f.key=++o,j[o]=f;l&&b(i)}a.removeAttribute(m)}else if(l&&(f=d.data(a,"tmplItem")))b(f.key),j[f.key]=f,g=(g=d.data(a.parentNode,"tmplItem"))?g.key:0;if(f){for(c=f;c&&c.key!=g;)c.nodes.push(a),c=c.parent;delete f._ctnt;delete f._wrap;d.data(a,"tmplItem",f)}}var e="_"+l,c,g,h={},f,i,k;f=0;for(i=a.length;f<i;f++)if((c=a[f]).nodeType===1){g=c.getElementsByTagName("*");for(k=g.length-1;k>=0;k--)b(g[k]);
b(c)}}function A(a,b,d,c){if(!a)return r.pop();r.push({_:a,tmpl:b,item:this,data:d,options:c})}function B(a,b,e){return d.tmpl(d.template(a),b,e,this)}function C(a,b){var e=a.options||{};e.wrapped=b;return d.tmpl(d.template(a.tmpl),a.data,e,a.item)}function D(a,b){var e=this._wrap;return d.map(d(d.isArray(e)?e.join(""):e).filter(a||"*"),function(a){if(b)a=a.innerText||a.textContent;else{var d;if(!(d=a.outerHTML))d=document.createElement("div"),d.appendChild(a.cloneNode(!0)),d=d.innerHTML;a=d}return a})}
function E(){var a=this.nodes;d.tmpl(null,null,null,this).insertBefore(a[0]);d(a).remove()}var y=d.fn.domManip,m="_tmplitem",x=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,j={},p={},q,z={key:0,data:{}},o=0,l=0,r=[];d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){d.fn[a]=function(e){var c=[],e=d(e),g,h,f;g=this.length===1&&this[0].parentNode;q=j||{};if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1)e[b](this[0]),c=this;
else{h=0;for(f=e.length;h<f;h++)l=h,g=(h>0?this.clone(!0):this).get(),d.fn[b].apply(d(e[h]),g),c=c.concat(g);l=0;c=this.pushStack(c,a,e.selector)}e=q;q=null;d.tmpl.complete(e);return c}});d.fn.extend({tmpl:function(a,b,e){return d.tmpl(this[0],a,b,e)},tmplItem:function(){return d.tmplItem(this[0])},template:function(a){return d.template(a,this[0])},domManip:function(a,b,e){if(a[0]&&a[0].nodeType){for(var c=d.makeArray(arguments),g=a.length,h=0,f;h<g&&!(f=d.data(a[h++],"tmplItem")););g>1&&(c[0]=[d.makeArray(a)]);
f&&l&&(c[2]=function(a){d.tmpl.afterManip(this,a,e)});y.apply(this,c)}else y.apply(this,arguments);l=0;q||d.tmpl.complete(j);return this}});d.extend({tmpl:function(a,b,e,c){var g=!c;if(g)c=z,a=d.template[a]||d.template(null,a),p={};else if(!a)return a=c.tmpl,j[c.key]=c,c.nodes=[],c.wrapped&&w(c,c.wrapped),d(k(c,null,c.tmpl(d,c)));if(!a)return[];typeof b==="function"&&(b=b.call(c||{}));e&&e.wrapped&&w(e,e.wrapped);b=d.isArray(b)?d.map(b,function(b){return b?n(e,c,a,b):null}):[n(e,c,a,b)];return g?
d(k(c,null,b)):b},tmplItem:function(a){var b;for(a instanceof d&&(a=a[0]);a&&a.nodeType===1&&!(b=d.data(a,"tmplItem"))&&(a=a.parentNode););return b||z},template:function(a,b){if(b)return typeof b==="string"?b=v(b):b instanceof d&&(b=b[0]||{}),b.nodeType&&(b=d.data(b,"tmpl")||d.data(b,"tmpl",v(b.innerHTML))),typeof a==="string"?d.template[a]=b:b;return a?typeof a!=="string"?d.template(null,a):d.template[a]||d.template(null,x.test(a)?a:d(a)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});
d.extend(d.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},
open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){j={}},afterManip:function(a,b,e){var c=b.nodeType===11?d.makeArray(b.childNodes):b.nodeType===1?[b]:[];e.call(a,b);u(c);l++}})})(jQuery);